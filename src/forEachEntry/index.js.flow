// @flow

import type {DoWhen, ConstructFunction} from '../_libs/createConstruct'

type ChangedFunction<O, P> = (newValue: O, oldValue?: O, ...args: P) => void

type Value<O> = { [key: string]: O } | null | false | void

type ChainFunctions<O, I> = {
  do: <P>(startFunc: ConstructFunction<O, P>, changedFunc?: ChangedFunction<O, P>) => DoWhen<O, I, P>
}


declare export default function forEachEntry<O, I, P> (mapValue:  (item: I) => Value<O>, changedFunc: ChangedFunction<O, P>): DoWhen<O, I, P>
declare export default function forEachEntry<O, I, P> (defaultValue?: Value<I>, changedFunc: ChangedFunction<O, P>): DoWhen<O, Value<I>, P>

// Can't distinguish a object from an function with flow, so this will not give 
declare export default function forEachEntry<O, I> (mapValue: (item: I) => Value<O>): ChainFunctions<O, I>
declare export default function forEachEntry<O, I> (defaultValue?: Value<I>): ChainFunctions<O, Value<I>>
 